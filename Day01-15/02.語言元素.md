## 語言元素

#### 指令和程式

計算機的硬體係統通常由五大部件構成，包括：運算器、控製器、存儲器、輸入設備和輸出設備。其中，運算器和控製器放在一起就是我們通常所說的中央處理器，它的功能是執行各種運算和控製指令以及處理計算機軟體中的數據。我們通常所說的程式實際上就是指令的集合，我們程式就是將一係列的指令按照某種方式組織到一起，然後通過這些指令去控製計算機做我們想讓它做的事情。今天我們大多數時候使用的計算機，雖然它們的元器件做工越來越精密，處理能力越來越強大，但究其本質來說仍然屬於[“馮·諾依曼結構”](https://zh.wikipedia.org/wiki/%E5%86%AF%C2%B7%E8%AF%BA%E4%BC%8A%E6%9B%BC%E7%BB%93%E6%9E%84)的計算機。“馮·諾依曼結構”有兩個關鍵點，一是指出要將存儲設備與中央處理器分開，二是提出了將數據以二進製方式編碼。二進製是一種“逢二進一”的計數法，跟我們人類使用的“逢十進一”的計數法冇有實質性的區別，人類因為有十根手指所以使用了十進製（因為在數數時十根手指用完之後就隻能進位了，當然凡事都有例外，瑪雅人可能是因為長年光著腳的原因把腳趾頭也算上了，於是他們使用了二十進製的計數法，在這種計數法的指導下瑪雅人的曆法就與我們平常使用的曆法不一樣，而按照瑪雅人的曆法，2012年是上一個所謂的“太陽紀”的最後一年，而2013年則是新的“太陽紀”的開始，後來這件事情被以訛傳訛的方式誤傳為”2012年是瑪雅人預言的世界末日“這種荒誕的說法，今天我們可以大膽的猜測，瑪雅文明之所以發展緩慢估計也與使用了二十進製有關）。對於計算機來說，二進製在物理器件上來說是最容易實現的（高電壓錶示1，低電壓錶示0），於是在“馮·諾依曼結構”的計算機都使用了二進製。雖然我們並不需要每個程式員都能夠使用二進製的思維方式來工作，但是了解二進製以及它與我們生活中的十進製之間的轉換關係，以及二進製與八進製和十六進製的轉換關係還是有必要的。如果你對這一點不熟悉，可以自行使用[維基百科](https://zh.wikipedia.org/wiki/%E4%BA%8C%E8%BF%9B%E5%88%B6)或者[百度百科](https://baike.baidu.com)科普一下。

> **說明**：近期關於**量子計算機**的研究已經被推倒了風口浪尖，量子計算機基於量子力學進行運算，使用量子瞬移的方式來傳遞信息。2018年6月，Intel宣佈開發出新款量子芯片並通過了在接近絕對零度環境下的測試；2019年，IBM和Google都推出了自己的量子計算機。

### 變數和類型

在程式設計中，變數是一種存儲數據的載體。計算機中的變數是實際存在的數據或者說是存儲器中存儲數據的一塊記憶體空間，變數的值可以被讀取和修改，這是所有計算和控製的基礎。計算機能處理的數據有很多種類型，除了數值之外還可以處理文本、圖形、音頻、視訊等各種各樣的數據，那麼不同的數據就需要定義不同的存儲類型。Python中的數據類型很多，而且也允許我們自定義新的數據類型（這一點在後麵會講到），我們先介紹幾種常用的數據類型。

- 整型：Python中可以處理任意大小的整數（Python 2.x中有`int`和`long`兩種類型的整數，但這種區分對Python來說意義不大，因此在Python 3.x中整數隻有int這一種了），而且支援二進製（如`0b100`，換算成十進製是4）、八進製（如`0o100`，換算成十進製是64）、十進製（`100`）和十六進製（`0x100`，換算成十進製是256）的錶示法。
- 浮點型：浮點數也就是小數，之所以稱為浮點數，是因為按照科學記數法錶示時，一個浮點數的小數點位置是可變的，浮點數除了數學寫法（如`123.456`）之外還支援科學計數法（如`1.23456e2`）。
- 字符串型：字符串是以單引號或雙引號括起來的任意文本，比如`'hello'`和`"hello"`,字符串還有原始字符串錶示法、字節字符串錶示法、Unicode字符串錶示法，而且可以書寫成多行的形式（用三個單引號或三個雙引號開頭，三個單引號或三個雙引號結尾）。
- 佈爾型：佈爾值隻有`True`、`False`兩種值，要麼是`True`，要麼是`False`，在Python中，可以直接用`True`、`False`錶示佈爾值（請註意大小寫），也可以通過佈爾運算計算出來（例如`3 < 5`會産生佈爾值`True`，而`2 == 1`會産生佈爾值`False`）。
- 複數型：形如`3+5j`，跟數學上的複數錶示一樣，唯一不同的是虛部的`i`換成了`j`。實際上，這個類型並不常用，大家了解一下就可以了。

#### 變數命名

對於每個變數我們需要給它取一個名字，就如同我們每個人都有屬於自己的響亮的名字一樣。在Python中，變數命名需要遵循以下這些必須遵守硬性規則和強烈建議遵守的非硬性規則。

- 硬性規則：
  - 變數名由字母（廣義的Unicode字符，不包括特殊字符）、數字和下劃線構成，數字不能開頭。
  - 大小寫敏感（大寫的`a`和小寫的`A`是兩個不同的變數）。
  - 不要跟關鍵字（有特殊含義的單詞，後麵會講到）和係統保留字（如函數、模塊等的名字）沖突。
- PEP 8要求：
  - 用小寫字母拚寫，多個單詞用下劃線連接。
  - 受保護的實例屬性用單個下劃線開頭（後麵會講到）。
  - 私有的實例屬性用兩個下劃線開頭（後麵會講到）。

當然，作為一個專業的程式員，給變數（事實上應該是所有的標識符）命名時做到見名知意也是非常重要的。

#### 變數的使用

下麵通過幾個例子來說明變數的類型和變數使用。

```Python
"""
使用變數保存數據並進行加減乘除運算

Version: 0.1
Author: 駱昊
"""
a = 321
b = 12
print(a + b)    # 333
print(a - b)    # 309
print(a * b)    # 3852
print(a / b)    # 26.75
```

在Python中可以使用`type`函數對變數的類型進行檢查。程式設計中函數的概念跟數學上函數的概念是一緻的，數學上的函數相信大家並不陌生，它包括了函數名、自變數和因變數。如果暫時不理解這個概念也不要緊，我們會在後續的章節中專門講解函數的定義和使用。

```Python
"""
使用type()檢查變數的類型

Version: 0.1
Author: 駱昊
"""
a = 100
b = 12.345
c = 1 + 5j
d = 'hello, world'
e = True
print(type(a))    # <class 'int'>
print(type(b))    # <class 'float'>
print(type(c))    # <class 'complex'>
print(type(d))    # <class 'str'>
print(type(e))    # <class 'bool'>
```

可以使用Python中內置的函數對變數類型進行轉換。

- `int()`：將一個數值或字符串轉換成整數，可以指定進製。
- `float()`：將一個字符串轉換成浮點數。
- `str()`：將指定的對象轉換成字符串形式，可以指定編碼。
- `chr()`：將整數轉換成該編碼對應的字符串（一個字符）。
- `ord()`：將字符串（一個字符）轉換成對應的編碼（整數）。

下麵的代碼通過鍵盤輸入兩個整數來實現對兩個整數的算術運算。

```Python
"""
使用input()函數獲取鍵盤輸入(字符串)
使用int()函數將輸入的字符串轉換成整數
使用print()函數輸出帶佔位符的字符串

Version: 0.1
Author: 駱昊
"""
a = int(input('a = '))
b = int(input('b = '))
print('%d + %d = %d' % (a, b, a + b))
print('%d - %d = %d' % (a, b, a - b))
print('%d * %d = %d' % (a, b, a * b))
print('%d / %d = %f' % (a, b, a / b))
print('%d // %d = %d' % (a, b, a // b))
print('%d %% %d = %d' % (a, b, a % b))
print('%d ** %d = %d' % (a, b, a ** b))
```

> **說明**：上麵的print函數中輸出的字符串使用了佔位符文法，其中`%d`是整數的佔位符，`%f`是小數的佔位符，`%%`錶示百分號（因為百分號代錶了佔位符，所以帶佔位符的字符串中要錶示百分號必須寫成`%%`），字符串之後的`%`後麵跟的變數值會替換掉佔位符然後輸出到終端中，運行上麵的程式，看看程式執行結果就明白啦。

### 運算符

Python支援多種運算符，下錶大緻按照優先級從高到低的順序列出了所有的運算符，運算符的優先級指的是多個運算符同時出現時，先做什麼運算然後再做什麼運算。除了我們之前已經用過的賦值運算符和算術運算符，我們稍後會陸續講到其他運算符的使用。

| 運算符                                                       | 描述                           |
| ------------------------------------------------------------ | ------------------------------ |
| `[]` `[:]`                                                   | 下標，切片                     |
| `**`                                                         | 指數                           |
| `~` `+` `-`                                                  | 按位取反, 正負號               |
| `*` `/` `%` `//`                                             | 乘，除，模，整除               |
| `+` `-`                                                      | 加，減                         |
| `>>` `<<`                                                    | 右移，左移                     |
| `&`                                                          | 按位與                         |
| `^` `\|`                                                      | 按位異或，按位或               |
| `<=` `<` `>` `>=`                                            | 小於等於，小於，大於，大於等於 |
| `==` `!=`                                                    | 等於，不等於                   |
| `is`  `is not`                                               | 身份運算符                     |
| `in` `not in`                                                | 成員運算符                     |
| `not` `or` `and`                                             | 邏輯運算符                     |
| `=` `+=` `-=` `*=` `/=` `%=` `//=` `**=` `&=` `|=` `^=` `>>=` `<<=` | （複合）賦值運算符             |

>**說明：** 在實際開發中，如果搞不清楚運算符的優先級，可以使用括號來確保運算的執行順序。

#### 賦值運算符

賦值運算符應該是最為常見的運算符，它的作用是將右邊的值賦給左邊的變數。下麵的例子演示了賦值運算符和複合賦值運算符的使用。

```Python
"""
賦值運算符和複合賦值運算符

Version: 0.1
Author: 駱昊
"""
a = 10
b = 3
a += b        # 相當於：a = a + b
a *= a + 2    # 相當於：a = a * (a + 2)
print(a)      # 算一下這裏會輸出什麼
```

### 比較運算符和邏輯運算符

比較運算符有的地方也稱為關係運算符，包括`==`、`!=`、`<`、`>`、`<=`、`>=`，我相信冇有什麼好解釋的，大家一看就能懂，唯一需要提醒的是比較相等用的是`==`，請註意這個地方是兩個等號，因為`=`是賦值運算符，我們在上麵剛剛講到過，`==`才是比較相等的比較運算符。比較運算符會産生佈爾值，要麼是`True`要麼是`False`。

邏輯運算符有三個，分別是`and`、`or`和`not`。`and`字麵意思是“而且”，所以`and`運算符會連接兩個佈爾值，如果兩個佈爾值都是`True`，那麼運算的結果就是`True`；左右兩邊的佈爾值有一個是`False`，最終的運算結果就是`False`。相信大家已經想到了，如果`and`左邊的佈爾值是`False`，不管右邊的佈爾值是什麼，最終的結果都是`False`，所以在做運算的時候右邊的值會被跳過（短路處理），這也就意味著在`and`運算符左邊為`False`的情況下，右邊的錶達式根本不會執行。`or`字麵意思是“或者”，所以`or`運算符也會連接兩個佈爾值，如果兩個佈爾值有任意一個是`True`，那麼最終的結果就是`True`。當然，`or`運算符也是有短路功能的，在它左邊的佈爾值為`True`的情況下，右邊的錶達式根本不會執行。`not`運算符的後麵會跟上一個佈爾值，它的作用是得到與該佈爾值相反的值，也就是說，後麵的佈爾值如果是`True`運算結果就是`False`，而後麵的佈爾值如果是`False`則運算結果就是`True`。

```Python
"""
比較運算符和邏輯運算符的使用

Version: 0.1
Author: 駱昊
"""
flag0 = 1 == 1
flag1 = 3 > 2
flag2 = 2 < 1
flag3 = flag1 and flag2
flag4 = flag1 or flag2
flag5 = not (1 != 2)
print('flag0 =', flag0)    # flag0 = True
print('flag1 =', flag1)    # flag1 = True
print('flag2 =', flag2)    # flag2 = False
print('flag3 =', flag3)    # flag3 = False
print('flag4 =', flag4)    # flag4 = True
print('flag5 =', flag5)    # flag5 = False
```

> **說明**：比較運算符的優先級高於賦值運算符，所以`flag0 = 1 == 1`先做`1 == 1`産生佈爾值`True`，再將這個值賦值給變數`flag0`。`print`函數可以輸出多個值，多個值之間可以用`,`進行分隔，輸出的內容之間預設以空格分開。

### 練習

#### 練習1：華氏溫度轉換為攝氏溫度。

> 提示：華氏溫度到攝氏溫度的轉換公式為：$C=(F - 32) \div 1.8$。

參考答案：

```Python
"""
將華氏溫度轉換為攝氏溫度

Version: 0.1
Author: 駱昊
"""
f = float(input('請輸入華氏溫度: '))
c = (f - 32) / 1.8
print('%.1f華氏度 = %.1f攝氏度' % (f, c))
```

> **說明**：在使用`print`函數輸出時，也可以對字符串內容進行格式化處理，上麵`print`函數中的字符串`%.1f`是一個佔位符，稍後會由一個`float`類型的變數值替換掉它。同理，如果字符串中有`%d`，後麵可以用一個`int`類型的變數值替換掉它，而`%s`會被字符串的值替換掉。除了這種格式化字符串的方式外，還可以用下麵的方式來格式化字符串，其中`{f:.1f}`和`{c:.1f}`可以先看成是`{f}`和`{c}`，錶示輸出時會用變數`f`和變數`c`的值替換掉這兩個佔位符，後麵的`:.1f`錶示這是一個浮點數，小數點後保留1位有效數字。
>
> ```Python
> print(f'{f:.1f}華氏度 = {c:.1f}攝氏度')
> ```

#### 練習2：輸入圓的半徑計算計算周長和麵積。

參考答案：

```Python
"""
輸入半徑計算圓的周長和麵積

Version: 0.1
Author: 駱昊
"""
radius = float(input('請輸入圓的半徑: '))
perimeter = 2 * 3.1416 * radius
area = 3.1416 * radius * radius
print('周長: %.2f' % perimeter)
print('麵積: %.2f' % area)
```

#### 練習3：輸入年份判斷是不是閏年。

參考答案：

```Python
"""
輸入年份 如果是閏年輸出True 否則輸出False

Version: 0.1
Author: 駱昊
"""
year = int(input('請輸入年份: '))
# 如果代碼太長寫成一行不便於閱讀 可以使用\對代碼進行摺行
is_leap = year % 4 == 0 and year % 100 != 0 or \
          year % 400 == 0
print(is_leap)
```

> **說明**：比較運算符會産生佈爾值，而邏輯運算符`and`和`or`會對這些佈爾值進行組合，最終也是得到一個佈爾值，閏年輸出`True`，平年輸出`False`。